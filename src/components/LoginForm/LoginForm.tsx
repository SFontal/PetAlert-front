import LoginFormStyled from "./LoginFormStyled";
import Button from "../Button/Button";
import useUser from "../../hooks/useUser";
import { useState } from "react";
import { UserCredentials } from "../../hooks/types";

const ininitalFormData: UserCredentials = { email: "", password: "" };

const LoginForm = (): JSX.Element => {
  const { loginUser } = useUser();

  const [email, setEmail] = useState(ininitalFormData.email);
  const [password, setPassword] = useState(ininitalFormData.password);

  const handleEmail = ({
    target: { value },
  }: React.ChangeEvent<HTMLInputElement>) => {
    setEmail(value);
  };

  const handlePassword = ({
    target: { value },
  }: React.ChangeEvent<HTMLInputElement>) => {
    setPassword(value);
  };

  const onSubmitHandler = async (event: React.FormEvent<HTMLFormElement>) => {
    event.preventDefault();

    await loginUser({ email, password });

    setEmail(ininitalFormData.email);
    setPassword(ininitalFormData.password);
  };

  return (
    <LoginFormStyled className="login-form" onSubmit={onSubmitHandler}>
      <label htmlFor="email">Email</label>
      <div className="login-form__container">
        <input
          className="login-form__field-email"
          type="email"
          id="email"
          name="email"
          autoComplete="off"
          onChange={handleEmail}
          value={email}
          required
        />
        <div className="login-form__email-icon">
          <svg
            width="29"
            height="23"
            viewBox="0 0 29 23"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g clipPath="url(#clip0_119_41)">
              <path
                d="M28.8042 10.8837C28.7405 9.72287 28.6896 8.5413 28.6402 7.39879C28.5921 6.28616 28.5425 5.1356 28.4808 4.00444C28.3918 2.36176 27.5248 1.16504 25.9739 0.543632C25.4263 0.324352 24.7523 0.208396 23.915 0.188831C21.697 0.137419 19.4417 0.113655 17.2605 0.0905514C16.4841 0.082295 15.7078 0.0736546 14.9316 0.0646349C14.912 0.0488363 14.8875 0.0401541 14.8621 0.0401414H13.0541C11.5849 0.0401414 10.1158 0.0405655 8.64687 0.0412593C8.37801 0.0412593 8.1083 0.0406665 7.83955 0.039938C7.03158 0.0372321 6.196 0.0349865 5.37423 0.0641267C4.25226 0.103778 3.38831 0.317624 2.65556 0.737244C1.17156 1.58731 0.379966 2.80071 0.302739 4.344C0.262054 5.1567 0.248348 5.98331 0.235176 6.78279L0.226573 7.28334C0.214675 7.95432 0.202245 8.62516 0.189285 9.29588C0.147538 11.506 0.104304 13.7913 0.087201 16.0398C0.0802963 16.9348 0.126611 17.9937 0.52167 19.0613C1.10592 20.6404 2.18359 21.6613 3.8163 22.1822C5.33535 22.6556 6.91943 22.8983 8.51345 22.9016C12.4757 22.9517 16.6317 22.9755 21.5229 22.9755H22.473C23.3719 22.9904 24.2692 22.8952 25.1439 22.6922C27.1493 22.1896 28.3378 20.9854 28.6762 19.1127C28.7838 18.4775 28.8586 17.8372 28.9001 17.1945C29.0466 15.2441 28.9368 13.2677 28.8303 11.3561L28.8042 10.8837ZM10.2747 21.2008C8.55839 21.1957 6.72448 21.1321 4.94273 20.704C4.22581 20.5319 3.71305 20.3302 3.30333 20.0573L12.1457 12.0903L12.3925 12.3505C12.6386 12.61 12.8925 12.8777 13.1491 13.1431C13.8916 13.9115 14.6201 13.9745 15.4413 13.3415C15.7773 13.0827 16.0965 12.7898 16.4052 12.5076C16.522 12.4004 16.6401 12.2924 16.76 12.185L25.4144 20.7432C25.1153 20.9842 24.7537 21.0346 24.3727 21.0878L24.2633 21.1032C23.8541 21.1565 23.4415 21.1813 23.0287 21.1771L20.608 21.1856C17.2209 21.198 13.719 21.211 10.2747 21.2008ZM23.7868 3.41487C22.4919 4.56019 21.153 5.74438 19.8762 6.9513C18.6021 8.15563 17.353 9.41778 16.1449 10.6387C15.6449 11.1441 15.1286 11.6659 14.6188 12.1751L3.86506 1.8422C3.94204 1.82215 4.01842 1.80189 4.09419 1.78142C4.38738 1.70327 4.66431 1.62923 4.9472 1.5748C6.35375 1.30421 7.80194 1.34101 9.20255 1.37712C9.51539 1.38503 9.82812 1.39286 10.1407 1.39785C10.6164 1.40514 11.1006 1.42068 11.5686 1.43577C11.9752 1.44878 12.3955 1.46231 12.8095 1.47032C13.9736 1.49287 15.1378 1.51452 16.302 1.53527C18.8185 1.58127 21.4206 1.62899 23.9794 1.68914C24.3392 1.70859 24.6967 1.75792 25.048 1.83661C25.1861 1.86357 25.3292 1.89123 25.4713 1.91538V1.91883C24.9116 2.41994 24.3399 2.92572 23.7866 3.41528L23.7868 3.41487ZM5.67506 15.9845C4.59654 16.9892 3.48254 18.0273 2.40529 19.088C1.95786 18.0538 1.72596 17.205 1.65692 16.3539C1.46571 13.9928 1.54517 11.6426 1.64353 9.43785C1.68847 8.43241 1.70642 7.40977 1.72384 6.42077C1.73574 5.74847 1.74806 5.05324 1.76867 4.37053C1.78991 3.64639 2.0371 3.13828 2.58991 2.68921L10.9925 10.7764C9.2819 12.6238 7.44842 14.3322 5.67443 15.9854L5.67506 15.9845ZM26.8578 18.9113C26.8185 19.1188 26.7659 19.3236 26.7004 19.5244C26.6768 19.6024 26.6532 19.6805 26.631 19.7586L26.5971 19.7696L17.6903 11.2662C20.7693 8.15437 23.6894 5.50048 26.61 3.15885C26.6225 3.21391 26.6353 3.26749 26.6478 3.31974C26.6998 3.50938 26.7344 3.70315 26.751 3.89885C26.8495 5.86832 26.9298 7.81195 26.9888 9.28541C27.0441 10.6681 27.0913 12.0323 27.1291 13.3404C27.1764 14.9967 27.1817 16.9543 26.8572 18.9118L26.8578 18.9113Z"
                fill="white"
              />
            </g>
            <defs>
              <clipPath id="clip0_119_41">
                <rect width="29" height="23" fill="white" />
              </clipPath>
            </defs>
          </svg>
        </div>
      </div>

      <label htmlFor="password">Password</label>
      <div className="login-form__container">
        <input
          className="login-form__field-password"
          type="password"
          id="password"
          name="password"
          onChange={handlePassword}
          value={password}
          required
        />
        <div className="login-form__password-icon">
          <svg
            width="29"
            height="28"
            viewBox="0 0 29 28"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g clipPath="url(#clip0_119_62)">
              <path
                d="M7.44861 6.6972C7.44861 6.30445 7.16418 6.05196 6.96093 5.76159C6.37206 4.92071 5.75966 4.09521 5.18979 3.24196C4.72503 2.57865 4.39829 1.83085 4.22851 1.04195C4.20206 0.898165 4.21066 0.750242 4.25367 0.610406C4.29668 0.470569 4.37289 0.342859 4.47584 0.237848C4.57533 0.1314 4.70496 0.0569983 4.8479 0.0243766C4.99085 -0.00824493 5.14044 0.00241033 5.27717 0.0549553C5.70166 0.239955 5.99633 0.566345 6.28012 0.90072C7.42088 2.24472 8.5559 3.59354 9.68518 4.9472C10.7702 6.24207 11.8709 7.52472 12.9287 8.84072C14.0783 10.2708 15.1857 11.7338 16.3129 13.1815C16.6288 13.587 16.9311 14.0045 17.2709 14.3895C18.7803 16.099 20.1341 17.927 21.5144 19.7366C22.048 20.4359 22.6482 21.0852 23.1896 21.779C24.4534 23.3987 25.7063 25.0267 26.9482 26.663C27.2395 27.0474 27.1226 27.6121 26.7669 27.8275C26.6026 27.9125 26.416 27.9457 26.2319 27.9227C26.0481 27.8997 25.8757 27.8214 25.7383 27.6986C25.53 27.4926 25.33 27.2776 25.1356 27.0587C23.4767 25.191 21.8181 23.3229 20.1601 21.4545C20.0663 21.3406 19.9436 21.2534 19.8045 21.2017C19.6653 21.15 19.5147 21.1357 19.3681 21.1604C18.858 21.2442 18.3515 21.3496 17.8428 21.4426C15.0749 21.9492 12.3903 21.5729 9.76191 20.6744C7.44343 19.8818 5.23929 18.8541 3.24601 17.4275C2.64199 17.0061 2.07198 16.5391 1.54111 16.0309C1.129 15.6131 0.770756 15.1467 0.474457 14.6424C-0.17722 13.5661 -0.100249 13.0651 0.794699 12.1042C2.4534 10.3293 4.34237 8.7784 6.41251 7.49172C6.7809 7.26122 7.23636 7.1342 7.44861 6.6972ZM11.5079 11.2597C10.9158 10.3286 10.1586 9.53772 9.3577 8.78997C9.22409 8.66497 8.94103 8.6461 8.73373 8.66247C8.51469 8.69367 8.30394 8.7667 8.11322 8.87746C5.94138 9.99546 3.98928 11.4224 2.16304 13.0241C2.09171 13.0812 2.03285 13.152 1.98996 13.2322C1.94708 13.3124 1.92104 13.4002 1.91347 13.4906C1.9059 13.581 1.91692 13.672 1.94588 13.758C1.97484 13.844 2.02113 13.9234 2.08197 13.9914C2.57189 14.5372 3.13728 15.0124 3.76147 15.4027C5.92621 16.8312 8.28456 17.8527 10.7724 18.5797C12.7795 19.1659 14.8341 19.2707 16.9081 19.0072C17.0644 18.9931 17.2141 18.9386 17.3421 18.849C17.4701 18.7594 17.5718 18.638 17.6369 18.4971C17.4332 18.23 17.2108 17.9434 16.9936 17.653C16.4416 16.9149 15.823 16.328 14.7742 16.6226C14.6279 16.6425 14.4797 16.6434 14.3333 16.6251C12.7638 16.6264 10.8634 15.3425 11.1352 12.9782C11.2004 12.4091 11.3759 11.8527 11.5079 11.2592V11.2597Z"
                fill="white"
              />
              <path
                d="M23.3797 19.4177C22.8443 19.1311 22.496 18.6768 22.1822 18.156C22.0839 17.9964 22.0461 17.8074 22.0752 17.6227C22.1044 17.4381 22.1989 17.2696 22.3419 17.1471C22.4047 17.0934 22.4717 17.0445 22.5424 17.0011C23.3616 16.503 24.1196 15.913 24.8013 15.2428C27.4579 12.6463 27.3137 13.2824 24.8013 10.8413C23.2437 9.32878 21.2736 8.45929 19.1899 7.86829C17.9081 7.50479 16.5979 7.2794 15.2529 7.33078C14.8837 7.34503 14.5137 7.33676 14.1443 7.34564C13.5855 7.35926 13.1464 7.11091 12.7842 6.72241C12.5863 6.50991 12.4271 6.26204 12.2496 6.03079C12.1397 5.88741 12.2738 5.56191 12.4554 5.50241C13.8966 5.03004 15.3739 5.08103 16.8459 5.2579C20.8857 5.7434 24.2813 7.5579 27.2155 10.2722C27.6956 10.7162 28.0902 11.2565 28.488 11.7793C28.7903 12.2005 28.9498 12.7054 28.9439 13.2215C28.9498 13.5051 28.941 13.8376 28.8022 14.0677C27.5047 16.2211 26.0072 18.1944 23.6445 19.335C23.5581 19.3682 23.4697 19.3959 23.3797 19.4177Z"
                fill="white"
              />
              <path
                d="M18.7263 12.7866C18.6903 13.0695 18.4778 13.7056 18.3717 13.5754C17.5421 12.5629 16.2892 11.081 15.4938 10.0418C15.4612 9.9871 15.4428 9.92526 15.4404 9.86185C15.438 9.79844 15.4515 9.73544 15.4799 9.6785C15.5302 9.62918 15.5908 9.59128 15.6575 9.56741C15.7241 9.54356 15.7952 9.53433 15.8658 9.54038C16.5219 9.64348 17.132 9.93657 17.6191 10.3825C18.3694 11.0605 18.8316 11.9569 18.7263 12.7866Z"
                fill="white"
              />
            </g>
            <defs>
              <clipPath id="clip0_119_62">
                <rect width="29" height="28" fill="white" />
              </clipPath>
            </defs>
          </svg>
        </div>
      </div>

      <Button text="Login!" />
    </LoginFormStyled>
  );
};

export default LoginForm;
